<?xml version="1.0" encoding="UTF-8"?>
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"               
                xmlns:p="http://primefaces.org/ui"
                xmlns:my="http://java.sun.com/jsf/composite/components">
        <h:form id="formDignatario"  prependId="false">
			<h:panelGrid id="idPnlDignatario" columns="4" styleClass="center">
		 			
		<h:outputLabel value="${msgs.lbl_fecInicio}" />
		<h:panelGroup>	
		<p:inputText value="#{ dignatarioController.dignatario.id.fecInicio}" converter="javax.faces.DateTime" />
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_fecFin}" />
		<h:panelGroup>	
		<p:inputText value="#{ dignatarioController.dignatario.id.fecFin}" converter="javax.faces.DateTime" />
 	</h:panelGroup>					
					
		<h:outputLabel value="${msgs.lbl_estado}" />
		<h:panelGroup>	
		<p:selectOneMenu value="#{dignatarioController.dignatario.estado}"
					effect="fade" >
					<f:selectItem itemLabel="${msgs.lbl_item_seleccione}" itemValue="" />
					<f:selectItem itemLabel="A" itemValue="ACTIVO" />
					<f:selectItem itemLabel="I" itemValue="INACTIVO" />
					<f:selectItem itemLabel="C" itemValue="CANCELADO" />
				</p:selectOneMenu>
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_junta}" />
		<h:panelGroup>	
		<p:inputText value="#{ dignatarioController.dignatario.junta}" />
<p:commandButton title="${msgs.btn_select} ${msgs.lbl_junta}" process="idPnlDignatario" oncomplete="dlgJunta.show()" icon="ui-icon-search"></p:commandButton>		 	</h:panelGroup>					
	
			<h:outputLabel value="${msgs.lbl_tipoDignatario}" />
			<h:panelGroup>
				<p:selectOneMenu
					value="#{dignatarioController.dignatario.tipoDignatario}"
					effect="fade" converter="catalogoConverter">
					<f:selectItem itemLabel="Select One" itemValue="" />
					<f:selectItems value="#{dignatarioController.tipoDignatarioItems}"
						var="tipoDignatario"
						itemLabel="#{tipoDignatario.codigo - tipoDignatario.valor}"
						itemValue="#{tipoDignatario}" />
				</p:selectOneMenu>
			</h:panelGroup>

		</h:panelGrid>
		       
       <p:panel header="${msgs.lbl_datos_personales}" collapsed="true"  toggleable="true"  menuTitle="${msgs.lbl_datos_personales}" toggleSpeed="10" id="pnlDatosPersonales"  widgetVar="panelDatosPersonales">
 		
    <ui:include  src="../persona/personaInclude.xhtml"  >
    </ui:include> 
       </p:panel>
				
		<h:panelGrid columns="4">
		<p:commandButton action="#{dignatarioController.doCrear}" value="${msgs.btn_crear}" update="idTblDignatario" style="margin-top: 10px;" icon="ui-icon-plusthick" ></p:commandButton>
		<p:commandButton action="#{dignatarioController.doActualizar}" value="${msgs.btn_modificar}" update="idTblDignatario" style="margin-top: 10px;" icon="ui-icon-disk" ></p:commandButton>
		<p:commandButton action="#{dignatarioController.doBorrar}" value="${msgs.btn_eliminar}" update="idTblDignatario" style="margin-top: 10px;" icon="ui-icon-minusthick" ></p:commandButton>
		<p:commandButton action="#{dignatarioController.doConsultar}" value="${msgs.btn_consultar}" update="idTblDignatario" style="margin-top: 10px;" icon="ui-icon-search" ></p:commandButton>
	                
		</h:panelGrid>
	<div  style="width:100%; overflow: auto;">
		<p:dataTable id="idTblDignatario" value="#{dignatarioController.entidadLst}" binding="#{dignatarioController.tabla}" var="dignatarioTO" rows="10" border="1" >
		 
		
		  			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_fecInicio}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.id.fecInicio}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_fecFin}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.id.fecFin}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_fecRegistro}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.fecRegistro}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_fecCambio}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.fecCambio}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_estado}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.estado}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_junta}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.junta.idJunta}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_persona}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.persona.idPersona}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_usuario}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.usuario.idUsuario}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_tipoDignatario}" />
		</f:facet>		
		<h:outputText value="#{dignatarioTO.tipoDignatario.idCatalogoDetalle}"  />
		</p:column>		
			
		<p:column   exportable="false">	
		<f:facet name="header">
		<h:panelGrid columns="2" styleClass="panelsinbore">
	   <p:commandLink id="btnDignatarioPrintPDF2"  title="${msgs.lbl_exportaPDF}"  ajax="false" rendered="#{!empty dignatarioController.entidadLst}">
	           <p:graphicImage value="/resources/images/pdf.png" alt="PDF" height="20" width="17" title="${msgs.lbl_exportaPDF}" /> 
	   <p:dataExporter target="idTblDignatario" type="pdf" fileName="reporteDignatario" 
	   preProcessor="#{dignatarioController.doPreProcessPDF}" />
	   </p:commandLink>
	          <p:commandLink id="btnDignatarioPrintXLS2"  title="${msgs.lbl_exportaXLS}"  ajax="false" rendered="#{!empty dignatarioController.entidadLst}">
	           <p:graphicImage value="/resources/images/excel.png" alt="XLS" height="20" width="17" title="${msgs.lbl_exportaXLS}"/> 
	   <p:dataExporter target="idTblDignatario" type="xls" fileName="reporteDignatario" 
	   postProcessor="#{dignatarioController.doPostProcessXLS}"/>
	   </p:commandLink> 
	   	</h:panelGrid>
		
		</f:facet>	
		<p:commandButton id="btnEditTblDignatario" action="#{dignatarioController.doEditar}" style="margin-top: 10px;" icon="ui-icon-pencil" process="@all,:formDignatario" update="@all,:formDignatario:idPnlDignatario" ></p:commandButton>
		
	    </p:column>		
		</p:dataTable>
		</div>	
	</h:form>
	 			
	 			
	<p:dialog header="${msgs.lbl_junta}" showEffect="fade" hideEffect="fade" widgetVar="dlgJunta" modal="false">
    <h:panelGrid id="dplyDignatarioJunta" columns="1" style="margin: 10px;"> 
    <ui:include  src="../junta/juntaSelect.xhtml"  >
    <ui:param name="uiParamBckBeanOrigen" value="dignatarioController.dignatario.junta" />
    <ui:param name="uiParamEntAtt" value="Junta" />
    <ui:param name="uiParamEntOrig" value="Dignatario" />
    </ui:include>       
    </h:panelGrid>
     <f:facet name="footer">
                <h:panelGroup layout="block" style="text-align: right; padding: 2px;">
                   
                    <p:commandButton type="button" value="${msgs.btn_cerrar}" onclick="dlgJunta.hide()" icon="ui-icon-closethick"/>
                </h:panelGroup>
            </f:facet>
    </p:dialog>
	

</ui:composition>
	
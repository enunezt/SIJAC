<?xml version="1.0" encoding="UTF-8"?>
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"               
                xmlns:p="http://primefaces.org/ui"
                xmlns:my="http://java.sun.com/jsf/composite/components">
        <h:form id="formJunta"  prependId="false">
			<h:panelGrid id="idPnlJunta" columns="2" styleClass="center">
		 			
		<h:outputLabel value="${msgs.lbl_codigo}" />
		<h:panelGroup>	
		<p:inputText value="#{ juntaController.junta.codigo}" />
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_barrio}" />
		<h:panelGroup>	
		<p:inputText value="#{ juntaController.junta.barrio}" />
 	</h:panelGroup>					
					
		<h:outputLabel value="${msgs.lbl_direccion}" />
		<h:panelGroup>	
		<p:inputText value="#{ juntaController.junta.direccion}" />
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_telefonos}" />
		<h:panelGroup>	
		<p:inputText value="#{ juntaController.junta.telefonos}" />
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_fecResolucion}" />
		<h:panelGroup>	
		<p:calendar id="calFecResolucion" value="#{juntaController.junta.fecResolucion}" navigator="true" display="inline"/> 
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_numResolucion}" />
		<h:panelGroup>	
		<p:inputText value="#{ juntaController.junta.numResolucion}" />
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_estado}" />
		<h:panelGroup>	
		<p:inputText value="#{ juntaController.junta.estado}" />
 	</h:panelGroup>					
		<h:outputLabel value="${msgs.lbl_ciudad}" />
		<h:panelGrid columns="2" cellspacing="5">

<p:selectOneMenu value="#{juntaController.junta.ciudad.departamento}" effect="fade" id="deptoCiudad" converter="lugaresConverter" style="width: 100px;">
<f:selectItem itemLabel="${msgs.lbl_item_seleccione}" itemValue="" />
<f:selectItems value="#{juntaController.lugar.deptoItems}" var="depto" itemLabel="#{depto.nombre}" itemValue="#{depto}"/>
<p:ajax listener="#{juntaController.departamentoChange}" update="ciudadCiudad"/>
</p:selectOneMenu>
<p:selectOneMenu value="#{juntaController.junta.ciudad}" effect="fade" id="ciudadCiudad" converter="lugaresConverter" style="width: 100px;">
<f:selectItem itemLabel="${msgs.lbl_item_seleccione}" itemValue="" />
<f:selectItems value="#{juntaController.lugar.ciudadItems}" var="ciudad" itemLabel="#{ciudad.nombre}" itemValue="#{ciudad}"/>
</p:selectOneMenu>
 	</h:panelGrid>				
		
		</h:panelGrid>
				
		<h:panelGrid columns="4">
		<p:commandButton action="#{juntaController.doCrear}" value="${msgs.btn_crear}" update="idTblJunta" style="margin-top: 10px;" icon="ui-icon-plusthick" ></p:commandButton>
		<p:commandButton action="#{juntaController.doActualizar}" value="${msgs.btn_modificar}" update="idTblJunta" style="margin-top: 10px;" icon="ui-icon-disk" ></p:commandButton>
		<p:commandButton action="#{juntaController.doBorrar}" value="${msgs.btn_eliminar}" update="idTblJunta" style="margin-top: 10px;" icon="ui-icon-minusthick" ></p:commandButton>
		<p:commandButton action="#{juntaController.doConsultar}" value="${msgs.btn_consultar}" update="idTblJunta" style="margin-top: 10px;" icon="ui-icon-search" ></p:commandButton>
	                
		</h:panelGrid>
	<div  style="width:100%; overflow: auto;">
		<p:dataTable id="idTblJunta" value="#{juntaController.entidadLst}" binding="#{juntaController.tabla}" var="juntaTO" rows="10" border="1" >
	<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_codigo}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.codigo}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_barrio}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.barrio}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_fecRegistro}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.fecRegistro}"  />
		</p:column>
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_direccion}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.direccion}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_telefonos}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.telefonos}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_fecResolucion}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.fecResolucion}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_numResolucion}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.numResolucion}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_estado}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.estado}"  />
		</p:column>		
		 			
		<p:column >
		<f:facet name="header">
		<h:outputLabel value="${msgs.lbl_ciudad}" />
		</f:facet>		
		<h:outputText value="#{juntaTO.ciudad.nombre}"  />
		</p:column>
		
		<p:column   exportable="false">	
		<f:facet name="header">
		<h:panelGrid columns="2" styleClass="panelsinbore">
	   <p:commandLink id="btnJuntaPrintPDF2"  title="${msgs.lbl_exportaPDF}"  ajax="false" rendered="#{!empty juntaController.entidadLst}">
	           <p:graphicImage value="/resources/images/pdf.png" alt="PDF" height="20" width="17" title="${msgs.lbl_exportaPDF}" /> 
	   <p:dataExporter target="idTblJunta" type="pdf" fileName="reporteJunta" 
	   preProcessor="#{juntaController.doPreProcessPDF}" />
	   </p:commandLink>
	          <p:commandLink id="btnJuntaPrintXLS2"  title="${msgs.lbl_exportaXLS}"  ajax="false" rendered="#{!empty juntaController.entidadLst}">
	           <p:graphicImage value="/resources/images/excel.png" alt="XLS" height="20" width="17" title="${msgs.lbl_exportaXLS}"/> 
	   <p:dataExporter target="idTblJunta" type="xls" fileName="reporteJunta" 
	   postProcessor="#{juntaController.doPostProcessXLS}"/>
	   </p:commandLink> 
	   	</h:panelGrid>
		
		</f:facet>	
		<p:commandButton id="btnEditTblJunta" action="#{juntaController.doEditar}" style="margin-top: 10px;" icon="ui-icon-pencil" process="@all,:formJunta" update="@all,:formJunta:idPnlJunta" ></p:commandButton>
		
	    </p:column>		
		</p:dataTable>
		</div>	
	</h:form>
	
	

</ui:composition>
	